var recentSearchKey='lux_';var currency='$';var monthn="";try{checkCooksLocStoreInstantCall();}catch(e){}if($.cookie("isClosedMobile")!='true'){setTimeout(function(){jQuery('.instant-call').show();},10000);}if($.cookie("isMobile")==''||$.cookie("isMobile")===undefined){if($(window).width()>767){$.cookie("isMobile","false");}else{$.cookie("isMobile","true");}$.cookie("ScreenWidth",$(window).width());$.cookie("ScreenHeight",$(window).height());}if($(window).width()>767){localStorage=window.localStorage
var rurl=window.location.href;var root=window.location.protocol+'//'+window.location.host+'/';try{checkCookLocalStorage();}catch(e){}var resSearch='lux_';if(typeof(Storage)!=="undefined"){var varInterestedinFlight='';var storagecount='';try{if($.cookie("isClosed")!='true'){if(localStorage.getItem('lux_1')!=null){varInterestedinFlight=' <div class=\'srch-head\'></div>';if(localStorage.length>0){for(var i=3;i>=1;i--){var tryit='';if(localStorage.getItem('lux_'+i)!=null){var resSearch=JSON.parse(localStorage.getItem('lux_'+i));var Journeytypr='';storagecount++;if(resSearch.JourneyType==='R'){Journeytypr='(Round Trip)';}else if(resSearch.JourneyType==='O'){Journeytypr='(One Way)';}try{tryit='<div class=\'srch-area\' id=\'lux_'+i+'\'>'+'<div class=\'departs\'>'+resSearch.JourneyFrom.split('-')[0]+'<br /><span class=\'span\'>'+GetFormatedDate(resSearch.DDate)+'</span></div>'+'<div class=\'arrows\'><i class=\'fa fa-exchange\'></i></div>'+'<div class=\'arrivals\'>'+resSearch.JourneyTo.split('-')[0]+'<br /><span class=\'span\'>';if(resSearch.RDate!=''){tryit=tryit+GetFormatedDate(resSearch.RDate);}else{tryit=tryit+Journeytypr;}tryit=tryit+'</span></div>'+'<div class=\'fares\'>'+currency+resSearch.CheapFare+'</div>'+'</div>';}catch(e){tryit='';$('#recdd').hide();}varInterestedinFlight=varInterestedinFlight+tryit;$('#recdd').show();}}}else{varInterestedinFlight='';$('#recdd').hide();}}else{$('#recdd').hide();}$('#recentsearches').prepend(varInterestedinFlight);$('#recentcount').append(storagecount);}}catch(e){$('#recdd').hide();}}}function checkCooksLocStoreInstantCall(){if(!$.cookie('isClosedMobile')){localStorage.setItem('isClosedMobile','false');}}function checkSubsPopupLocalStorage(){if(!$.cookie('isClosedSubs')){localStorage.setItem('isClosedSubs','false');}}$(".call_close_btn").click(function(){localStorage.setItem('isClosedSubs','true');var date=new Date();var minutes=960;date.setTime(date.getTime()+(minutes*60*1000));$.cookie("isClosedSubs","true",{expires:date});});$(".instant-close").click(function(){localStorage.setItem('isClosedMobile','true');var date=new Date();var minutes=960;date.setTime(date.getTime()+(minutes*60*1000));$.cookie("isClosedMobile","true",{expires:date});});function checkCookLocalStorage(){if(!$.cookie('isClosed')){localStorage.setItem('isClosed','false');}}function checkappPopupLocalStorage(){if(!$.cookie('isClosedApp')){localStorage.setItem('isClosedApp','false');}}$(".close_btn").click(function(){localStorage.setItem('isClosedApp','true');var date=new Date();var minutes=120;date.setTime(date.getTime()+(minutes*60*1000));$.cookie("isClosedApp","true",{expires:date});});$(".redirect_toplace").click(function(){localStorage.setItem('isClosedApp','true');var date=new Date();var minutes=120;date.setTime(date.getTime()+(minutes*60*1000));$.cookie("isClosedApp","true",{expires:date});});function GetFormatedDate(dateToFormate){var date=new Date(dateToFormate.replace('-','/').replace('-','/'));var day=date.getDate();var month=MonthName(date.getMonth());var weekday=WeekDay(date.getDay())
day=day<10?"0"+day:day;return weekday+", "+month+" "+day;}function BestPriceFormatedDate(dateToFormate){var date=new Date(dateToFormate);var day=date.getDate();var month=MonthName(date.getMonth());var weekday=WeekDay(date.getDay())
var hh=date.getHours();var mm=date.getMinutes();var dd="am";var h=hh;if(h>=12){h=hh-12;dd="pm";}if(h==0){h=12;}day=day<10?"0"+day:day;h=h.toString().length<2?"0"+h:h;mm=mm.toString().length<2?"0"+mm:mm;return month+" "+day+", "+h+":"+mm+dd;}function WeekDay(index){var weekday=new Array(7);weekday[0]="Sun";weekday[1]="Mon";weekday[2]="Tue";weekday[3]="Wed";weekday[4]="Thu";weekday[5]="Fri";weekday[6]="Sat";return weekday[index];}function MonthName(index){var month=new Array();month[0]="Jan";month[1]="Feb";month[2]="Mar";month[3]="Apr";month[4]="May";month[5]="Jun";month[6]="Jul";month[7]="Aug";month[8]="Sep";month[9]="Oct";month[10]="Nov";month[11]="Dec";return month[index];}function MonthNumber(index){switch(index){case 0:month="1";break;case 1:month="2";break;case 2:month="3";break;case 3:month="4";break;case 4:month="5";break;case 5:month="6";break;case 6:month="7";break;case 7:month="8";break;case 8:month="9";break;case 9:month="10";break;case 10:month="11";break;case 11:month="12";break;}return month;}function IsSearchTimeExpire(priceexpTime){if(new Date()>new Date(priceexpTime)){return true;}return false;}$("div.srch-area").click(function(){var localdata='',url='';var classtyep='';var root=window.location.protocol+'//'+window.location.host+'/';var Dd='',rd='';localdata=JSON.parse(localStorage.getItem(this.id));if(IsSearchTimeExpire(localdata.DDate.replace('-','/').replace('-','/'))){var d=new Date();var day=d.getDate()+7;var rday=d.getDate()+15;var month=MonthNumber(d.getMonth());var year=d.getFullYear();if(day<10){day="0"+day;}if(rday<10){rday="0"+rday;}if(month<10){month="0"+month;}else{month=month;}Dd=month+"-"+day+"-"+year;rd=month+"-"+rday+"-"+year;}else{Dd=localdata.DDate;rd=localdata.RDate}if(localdata.Class=='Economy'){classtyep='Y';}else if(localdata.Class=='Premium Economy'){classtyep='W';}else if(localdata.Class=='Business'){classtyep='C';}else{classtyep='Y';}if(localdata.JourneyType=='R'){url='flights/recent-search-deals/'+localdata.JourneyType+'/'+localdata.JourneyFrom.split('-')[0].trim()+'/'+localdata.JourneyTo.split('-')[0].trim()+'/'+Dd+'/'+rd+'/'+localdata.Adults+'/'+localdata.Childs+'/'+localdata.Infants+'/'+classtyep;}else{url='flights/recent-search-deals/'+localdata.JourneyType+'/'+localdata.JourneyFrom.split('-')[0].trim()+'/'+localdata.JourneyTo.split('-')[0].trim()+'/'+Dd+'/-/'+localdata.Adults+'/'+localdata.Childs+'/'+localdata.Infants+'/'+classtyep;}window.open(root+url,"_self");var pax='Passenger';if((parseInt(localdata.Adults)+parseInt(localdata.Childs)+parseInt(localdata.Infants)>1)){pax='Passengers';}$("#openPopup_multicity").hide();$("#openPopup_searchflight").show();$("#spn_flyfrom_popup").html(localdata.JourneyFrom.split(',')[1].trim());$("#spn_flyfrom_popup_1").html(localdata.JourneyFrom.split(',')[1].trim());$("#spn_flyto_popup").html(localdata.JourneyTo.split(',')[1].trim());$("#spn_flyto_popup_1").html(localdata.JourneyTo.split(',')[1].trim());$("#spn_depart_date_popup").html(localdata.DD_display);$("#spn_return_date_popup").html(localdata.RD_display);$("#spn_trvaller").html((parseInt(localdata.Adults)+parseInt(localdata.Childs)+parseInt(localdata.Infants)+" "+pax));$("#spn_depart_date_popup_1").html(localdata.DD_display);if(rd==''){$('.mid-roundway').hide();$('.mid-oneway').show();$('#datebet').hide();}$("#searchModal").show();});var getUrlParameter=function getUrlParameter(sParam){var sPageURL=decodeURIComponent(window.location.search.substring(1)),sURLVariables=sPageURL.split('&'),sParameterName,i;for(i=0;i<sURLVariables.length;i++){sParameterName=sURLVariables[i].split('=');if(sParameterName[0]===sParam){return sParameterName[1]===undefined?true:sParameterName[1];}}};function setAppStoreval(from,To,DD,RD,Adult,Child,Infant,flyclass,JT,PA,FT,MLO,MR,AirlineName,CheapFare,DD_display,RD_display){var isInsert=false;storage=window.localStorage
var storageData=InitilizeSearchData(from,To,DD,RD,Adult,Child,Infant,flyclass,JT,PA,FT,MLO,MR,AirlineName,CheapFare,DD_display,RD_display);var recentKey=recentSearchKey;for(var i=1;i<=3;i++){if(localStorage.getItem(recentKey+i)===null){localStorage.setItem(recentKey+i,JSON.stringify(storageData));localStorage.setItem('res_search_key',recentKey+i);isInsert=true;break;}else{if(ReplaceIfDuplicateValue(i,storageData,from,To)===true){isInsert=true;break;}}}if(isInsert===false){localStorage.removeItem(recentKey+1);localStorage.setItem(recentKey+1,localStorage.getItem(recentKey+2));localStorage.removeItem(recentKey+2);localStorage.setItem(recentKey+2,localStorage.getItem(recentKey+3));localStorage.removeItem(recentKey+3);localStorage.setItem(recentKey+3,JSON.stringify(storageData));}}function ReplaceIfDuplicateValue(id,DataToStore,flyfrom,flyto){var resSearch=JSON.parse(localStorage.getItem('lux_'+id));if(resSearch.JourneyFrom===flyfrom&&resSearch.JourneyTo===flyto){localStorage.setItem('lux_'+id,JSON.stringify(DataToStore));localStorage.setItem('res_search_key','lux_'+id);return true;}else{return false;}}function InitilizeSearchData(from,To,DD,RD,Adult,Child,Infant,flyclass,JT,PA,FT,MLO,MR,AirlineName,CheapFare,DD_display,RD_display){var SearchdataTravelers={"JourneyFrom":0,"JourneyTo":0,"DDate":0,"RDate":0,"Adults":1,"Childs":0,"Infants":0,"Class":'Y',"JourneyType":JT,"prefAir":"","flightType":FT,"MaxLayOver":MLO,"MaxRadius":MR,"AirliNeName":AirlineName,"CheapFare":CheapFare,"DD_display":0,"RD_display":0,},JF=from,RJT=To,DaprtD=DD,ReturnD=RD,vcAdult=Adult,vcChild=Child,vcInfant=Infant,vcflyclass=flyclass,vcJourneytype=JT,vcPrefrAir=PA,vcFligthTYpe=FT,vcmaxLAy=MLO,vcMaxRadious=MR,vcAir=AirlineName,vcFare=CheapFare;SearchdataTravelers.JourneyFrom=JF;SearchdataTravelers.JourneyTo=RJT;SearchdataTravelers.DDate=DaprtD;SearchdataTravelers.RDate=ReturnD;SearchdataTravelers.Adults=vcAdult;SearchdataTravelers.Childs=vcChild;SearchdataTravelers.Infants=vcInfant;SearchdataTravelers.Class=vcflyclass;SearchdataTravelers.JourneyType=vcJourneytype;SearchdataTravelers.prefAir=vcPrefrAir;SearchdataTravelers.flightType=vcFligthTYpe;SearchdataTravelers.MaxLayOver=vcmaxLAy;SearchdataTravelers.MaxRadius=vcMaxRadious;SearchdataTravelers.AirliNeName=vcAir;SearchdataTravelers.CheapFare=vcFare;SearchdataTravelers.DD_display=DD_display;SearchdataTravelers.RD_display=RD_display;return SearchdataTravelers;}function Throttle(f,delay){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer);timer=window.setTimeout(function(){f.apply(context,args);},delay||500);};}$(document).ready(function(){var resSearch='lux_';if(typeof(Storage)!=="undefined"){for(var i=3;i>=1;i--){if(localStorage.getItem('lux_'+i)!=null){var resSearch=JSON.parse(localStorage.getItem('lux_'+i));BindLastSearchInControl(resSearch);break;}}}function BindLastSearchInControl(_ressearch){var setDepdate='';var setRetDate='';if(_ressearch.JourneyType=='O'){$('input:radio[name="RoundTrip"][value=\'R\']').prop('checked',false);$('input:radio[name="MultiCity"][value=\'M\']').prop('checked',false);$('input:radio[name="OneWay"][value='+_ressearch.JourneyType+']').prop('checked',true);$("#txtFlyFrom").val(_ressearch.JourneyFrom);$("#txtFlyTo").val(_ressearch.JourneyTo);$("#txtDepartingDate").val(_ressearch.DD_display);$("#dv_return").hide();$("#ddlAdult").val(_ressearch.Adults);$("#ddlChild").val(_ressearch.Childs);$("#ddlInfant").val(_ressearch.Infants);}else if(_ressearch.JourneyType=='R'){$('input:radio[name="MultiCity"][value=\'M\']').prop('checked',false);$('input:radio[name="OneWay"][value=\'O\']').prop('checked',false);$('input:radio[name="RoundTrip"][value='+_ressearch.JourneyType+']').prop('checked',true);$("#txtFlyFrom").val(_ressearch.JourneyFrom);$("#txtFlyTo").val(_ressearch.JourneyTo);$("#txtDepartingDate").val(_ressearch.DD_display);$("#dv_return").show(true);$("#txtReturnDate").val(_ressearch.RD_display);$("#ddlAdult").val(_ressearch.Adults);$("#ddlChild").val(_ressearch.Childs);$("#ddlInfant").val(_ressearch.Infants);}}function NewMonthName(index){if(index==01){index=1;}else if(index==02){index=2;}else if(index==03){index=3;}else if(index==04){index=4;}else if(index==05){index=5;}else if(index==06){index=6;}else if(index==07){index=7;}else if(index==08){index=8;}else if(index==09){index=9;}else{index=index;}switch(index){case 1:monthn="Jan";break;case 2:monthn="Feb";break;case 3:monthn="Mar";break;case 4:monthn="Apr";break;case 5:monthn="May";break;case 6:monthn="Jun";break;case 7:monthn="Jul";break;case 8:monthn="Aug";break;case 9:monthn="Sep";break;case 10:monthn="Oct";break;case 11:monthn="Nov";break;case 12:monthn="Dec";break;}return monthn;}});